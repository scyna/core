context account;

entity account {
    model{
        id: int64 PK
        email: string index
        name: string
        avatar: string
        password: string
        dob: string
    }

    from CreateAccountRequest{email, name, dob: birthday}
    from Account{email, name, dob: birthday}
    to GetAccountResponse{email, name, dob: birthday}

    get AccountByEmail(email) => (id, email, name, avatar, dob)
    get AccountByID(id) => (id, email, name, avatar, dob)
    set Account(id) => (email, name, password)
    set Password(id) => (password)
    create Account(id, email, name, password)
}

entity setting{
    model{
        key: string PK
        value: string
    }

    get Setting(key) => {value}
    set Setting(key) => {value}
}

relationship account_has_setting{
    model{
        account_id: int64
        key: string
        active: bool
        PK(account_id,key)
    }

    list SettingByAccount(account_id) => {key}
    list ActiveSettingByAccount(account_id, active=true) => {key}
}